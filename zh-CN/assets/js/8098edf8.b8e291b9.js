"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7593],{3905:(e,n,t)=>{t.d(n,{Zo:()=>m,kt:()=>k});var a=t(67294);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,r=function(e,n){if(null==e)return{};var t,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)t=i[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=a.createContext({}),s=function(e){var n=a.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},m=function(e){var n=s(e.components);return a.createElement(p.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,r=e.mdxType,i=e.originalType,p=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),d=s(t),k=r,u=d["".concat(p,".").concat(k)]||d[k]||c[k]||i;return t?a.createElement(u,o(o({ref:n},m),{},{components:t})):a.createElement(u,o({ref:n},m))}));function k(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=t.length,o=new Array(i);o[0]=d;var l={};for(var p in n)hasOwnProperty.call(n,p)&&(l[p]=n[p]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=t[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},62338:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>p,metadata:()=>m,toc:()=>d});var a,r=t(87462),i=t(63366),o=(t(67294),t(3905)),l=["components"],p={sidebar_label:"Python \ud29c\ud1a0\ub9ac\uc5bc"},s="NEAR Lake \uc778\ub371\uc11c \uae30\ubcf8 \ud29c\ud1a0\ub9ac\uc5bc",m={unversionedId:"tutorials/indexer/python-lake-indexer",id:"tutorials/indexer/python-lake-indexer",title:"NEAR Lake \uc778\ub371\uc11c \uae30\ubcf8 \ud29c\ud1a0\ub9ac\uc5bc",description:"frolvanya/near-lake-raw-printer: \ube14\ub85d \ub192\uc774\uc640 \uc0e4\ub4dc \uc218\ub97c \ucd9c\ub825\ud558\ub294 \uc778\ub371\uc11c\ub97c \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \ud29c\ud1a0\ub9ac\uc5bc \uc18c\uc2a4 \ucf54\ub4dc",source:"@site/../docs/3.tutorials/indexer/python-lake-indexer.md",sourceDirName:"3.tutorials/indexer",slug:"/tutorials/indexer/python-lake-indexer",permalink:"/near_docs/zh-CN/tutorials/indexer/python-lake-indexer",draft:!1,editUrl:"https://github.com/near/docs/edit/master/website/../docs/3.tutorials/indexer/python-lake-indexer.md",tags:[],version:"current",lastUpdatedBy:"[sm-stack]",lastUpdatedAt:1678337636,formattedLastUpdatedAt:"2023\u5e743\u67089\u65e5",frontMatter:{sidebar_label:"Python \ud29c\ud1a0\ub9ac\uc5bc"},sidebar:"\ud29c\ud1a0\ub9ac\uc5bc",previous:{title:"\uc2dc\uc791 \uc635\uc158",permalink:"/near_docs/zh-CN/tutorials/indexer/lake-start-options"},next:{title:"NFT \uc778\ub371\uc11c",permalink:"/near_docs/zh-CN/tutorials/indexer/nft-indexer"}},c={},d=[{value:"\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131",id:"\ud504\ub85c\uc81d\ud2b8-\uc0dd\uc131",level:2},{value:"\uc758\uc874\uc131(dependency) \uc124\uce58",id:"\uc758\uc874\uc131dependency-\uc124\uce58",level:2},{value:"<code>near-lake-framework</code> \uac00\uc838\uc624\uae30",id:"near-lake-framework-\uac00\uc838\uc624\uae30",level:2},{value:"\uad6c\uc131(config) \uc0dd\uc131",id:"\uad6c\uc131config-\uc0dd\uc131",level:2},{value:"\uc2a4\ud2b8\ub9bc \uc2dc\uc791",id:"\uc2a4\ud2b8\ub9bc-\uc2dc\uc791",level:2},{value:"\ubaa8\ub4e0 \ucf54\ub4dc",id:"\ubaa8\ub4e0-\ucf54\ub4dc",level:2}],k=(a="ProgrammingLanguage",function(e){return console.warn("Component "+a+" was not imported, exported, or provided by MDXProvider as global scope"),(0,o.kt)("div",e)}),u={toc:d};function g(e){var n=e.components,t=(0,i.Z)(e,l);return(0,o.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"near-lake-\uc778\ub371\uc11c-\uae30\ubcf8-\ud29c\ud1a0\ub9ac\uc5bc"},"NEAR Lake \uc778\ub371\uc11c \uae30\ubcf8 \ud29c\ud1a0\ub9ac\uc5bc"),(0,o.kt)(k,{lang:"python",mdxType:"ProgrammingLanguage"}),(0,o.kt)("admonition",{title:"\ud29c\ud1a0\ub9ac\uc5bc \uc18c\uc2a4 \ucf54\ub4dc",type:"info"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"https://github.com/frolvanya/near-lake-raw-printer"},(0,o.kt)("inlineCode",{parentName:"a"},"frolvanya/near-lake-raw-printer")),": \ube14\ub85d \ub192\uc774\uc640 \uc0e4\ub4dc \uc218\ub97c \ucd9c\ub825\ud558\ub294 \uc778\ub371\uc11c\ub97c \ub9cc\ub4dc\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \ud29c\ud1a0\ub9ac\uc5bc \uc18c\uc2a4 \ucf54\ub4dc")),(0,o.kt)("p",null,"\ucd5c\uadfc\uc5d0 \uc6b0\ub9ac\ub294 ",(0,o.kt)("a",{parentName:"p",href:"https://pypi.org/project/near-lake-framework/"},"NEAR Lake \ud504\ub808\uc784\uc6cc\ud06c\uc758 Python \ubc84\uc804\uc744 pypi.org\uc5d0 \uac8c\uc2dc"),"\ud588\uc2b5\ub2c8\ub2e4."),(0,o.kt)("p",null,"\uc6b0\ub9ac\ub294 Python \ud328\ud0a4\uc9c0\ub97c \uc0ac\uc6a9\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud55c \uae30\ubcf8 \ud29c\ud1a0\ub9ac\uc5bc\uc744 \uc81c\uacf5\ud558\uace0 \uc2f6\uc2b5\ub2c8\ub2e4. \uc2dc\uc791\ud574 \ubd05\uc2dc\ub2e4!"),(0,o.kt)("h2",{id:"\ud504\ub85c\uc81d\ud2b8-\uc0dd\uc131"},"\ud504\ub85c\uc81d\ud2b8 \uc0dd\uc131"),(0,o.kt)("p",null,"\uc778\ub371\uc11c \ud504\ub85c\uc81d\ud2b8\ub97c \ub9cc\ub4ed\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"mkdir near-lake-raw-printer && cd near-lake-raw-printer\ntouch main.py\n")),(0,o.kt)("h2",{id:"\uc758\uc874\uc131dependency-\uc124\uce58"},"\uc758\uc874\uc131(dependency) \uc124\uce58"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"near-lake-framework"),"\ub97c \uc124\uce58\ud569\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"pip3 install near-lake-framework\n")),(0,o.kt)("h2",{id:"near-lake-framework-\uac00\uc838\uc624\uae30"},(0,o.kt)("inlineCode",{parentName:"h2"},"near-lake-framework")," \uac00\uc838\uc624\uae30"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"main.py")," \ud30c\uc77c\uc5d0\uc11c \ud544\uc694\ud55c \uc758\uc874\uc131\uc744 \uac00\uc838\uc624\uaca0\uc2b5\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:"title=main.py",title:"main.py"},"from near_lake_framework import near_primitives, LakeConfig, streamer\n")),(0,o.kt)("p",null,"\uc2e4\uc81c\ub85c \uc778\ub371\uc11c\ub97c \uc2e4\ud589\ud558\uae30 \uc704\ud574 \ud638\ucd9c\ub420 \uae30\ubcf8 \ud568\uc218 ",(0,o.kt)("inlineCode",{parentName:"p"},"streamer"),"\uc640 \uad6c\uc131\ud574\uc57c \ud558\ub294 \uc790\ub8cc\ud615 \uc911 ",(0,o.kt)("inlineCode",{parentName:"p"},"near_primitives")," \ubc0f ",(0,o.kt)("inlineCode",{parentName:"p"},"LakeConfig"),"\ub97c \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4."),(0,o.kt)("h2",{id:"\uad6c\uc131config-\uc0dd\uc131"},"\uad6c\uc131(config) \uc0dd\uc131"),(0,o.kt)("p",null,"\uc544\ub798\uc640 \uac19\uc774 ",(0,o.kt)("inlineCode",{parentName:"p"},"LakeConfig"),"\uc758 \uc778\uc2a4\ud134\uc2a4\ud654\ub97c \ucd94\uac00\ud558\uc138\uc694."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:"title=main.py",title:"main.py"},'config = LakeConfig.mainnet()\nconfig.start_block_height = 69030747\nconfig.aws_access_key_id = os.getenv("AWS_ACCESS_KEY_ID")\nconfig.aws_secret_key = os.getenv("AWS_SECRET_ACCESS_KEY")\n')),(0,o.kt)("p",null,"\uad6c\uc131(config)\uc5d0 \ub300\ud574 \uba87 \ub9c8\ub514 \ud558\uc790\uba74, ",(0,o.kt)("inlineCode",{parentName:"p"},"mainnet()")," \ud568\uc218\ub294 \uba54\uc778\ub137\uc5d0 \ub300\ud574 ",(0,o.kt)("inlineCode",{parentName:"p"},"s3_bucket_name"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"s3_region_name"),"\uc744 \uc124\uc815\ud588\uc2b5\ub2c8\ub2e4.\n",(0,o.kt)("a",{parentName:"p",href:"https://explorer.near.org"},"NEAR \uc775\uc2a4\ud50c\ub85c\ub7ec"),"\ub85c \uac00\uc11c ",(0,o.kt)("strong",{parentName:"p"},"\uac00\uc7a5 \ucd5c\uadfc\uc758")," \ube14\ub85d \ub192\uc774\ub97c \uac00\uc838\uc640 ",(0,o.kt)("inlineCode",{parentName:"p"},"config.start_block_height"),"\ub97c \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("h2",{id:"\uc2a4\ud2b8\ub9bc-\uc2dc\uc791"},"\uc2a4\ud2b8\ub9bc \uc2dc\uc791"),(0,o.kt)("p",null,(0,o.kt)("inlineCode",{parentName:"p"},"config"),"\ub85c ",(0,o.kt)("inlineCode",{parentName:"p"},"streamer")," \ud568\uc218\ub97c \ud638\ucd9c\ud574 \ubcf4\uaca0\uc2b5\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:"title=main.py",title:"main.py"},'stream_handle, streamer_messages_queue = streamer(config)\nwhile True:\n    streamer_message = await streamer_messages_queue.get()\n    print(f"Block #{streamer_message.block.header.height} Shards: {len(streamer_message.shards)}")\n')),(0,o.kt)("p",null,"\uadf8\ub9ac\uace0 ",(0,o.kt)("inlineCode",{parentName:"p"},"main.py")," \ub05d \ubd80\ubd84\uc5d0\uc11c \uc778\ub371\uc11c\uc758 \uc2e4\uc81c \uc2dc\uc791\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:"title=main.py",title:"main.py"},"loop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n")),(0,o.kt)("h2",{id:"\ubaa8\ub4e0-\ucf54\ub4dc"},"\ubaa8\ub4e0 \ucf54\ub4dc"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-python",metastring:"title=main.py",title:"main.py"},'import asyncio\nimport os\n\nfrom near_lake_framework import LakeConfig, streamer, near_primitives\n\nasync def main():    \n    config = LakeConfig.mainnet()\n    config.start_block_height = 69030747\n    config.aws_access_key_id = os.getenv("AWS_ACCESS_KEY_ID")\n    config.aws_secret_key = os.getenv("AWS_SECRET_ACCESS_KEY")\n\n    stream_handle, streamer_messages_queue = streamer(config)\n    while True:\n        streamer_message = await streamer_messages_queue.get()\n        print(f"Block #{streamer_message.block.header.height} Shards: {len(streamer_message.shards)}")\n\nloop = asyncio.get_event_loop()\nloop.run_until_complete(main())\n')),(0,o.kt)("p",null,"\uc774\uac8c \uc804\ubd80\uc785\ub2c8\ub2e4. \uc774\uc81c ",(0,o.kt)("inlineCode",{parentName:"p"},"main.py"),"\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"python3 main.py\n")),(0,o.kt)("p",null,"\ub2e4\uc74c\uacfc \uac19\uc740 \ub0b4\uc6a9\uc774 \ud45c\uc2dc\ub418\uc5b4\uc57c \ud569\ub2c8\ub2e4."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Received 400 blocks from S3\nBlock #69030747 Shards: 4\nBlock #69030748 Shards: 4\nBlock #69030749 Shards: 4\nBlock #69030750 Shards: 4\nBlock #69030751 Shards: 4\nBlock #69030752 Shards: 4\nBlock #69030753 Shards: 4\nBlock #69030754 Shards: 4\n")),(0,o.kt)("p",null,"CTRL+C\ub97c \ub20c\ub7ec \uc778\ub371\uc11c\ub97c \uc911\uc9c0\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."),(0,o.kt)("admonition",{title:"\uc790\uaca9 \uc99d\uba85",type:"danger"},(0,o.kt)("p",{parentName:"admonition"},(0,o.kt)("a",{parentName:"p",href:"/tools/realtime#near-lake-indexer"},"NEAR Lake"),"\uc5d0\uc11c \ub370\uc774\ud130\uc5d0 \uc561\uc138\uc2a4\ud558\ub824\uba74 \uc790\uaca9 \uc99d\uba85\uc744 \uc81c\uacf5\ud574\uc57c \ud569\ub2c8\ub2e4. ",(0,o.kt)("a",{parentName:"p",href:"/near_docs/zh-CN/tutorials/indexer/credentials"},"\uc790\uaca9 \uc99d\uba85")," \ubb38\uc11c\ub97c \ucc38\uace0\ud558\uc138\uc694.")),(0,o.kt)("p",null,"GitHub\uc5d0\uc11c ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/frolvanya/near-lake-raw-printer"},"\uc774 \ud29c\ud1a0\ub9ac\uc5bc\uc758 \uc18c\uc2a4 \ucf54\ub4dc"),"\ub97c \ucc3e\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4."))}g.isMDXComponent=!0}}]);